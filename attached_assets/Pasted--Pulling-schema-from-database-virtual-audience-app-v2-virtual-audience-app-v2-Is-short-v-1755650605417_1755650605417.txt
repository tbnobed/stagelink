[✓] Pulling schema from database...
virtual-audience-app-v2  |
virtual-audience-app-v2  | Is short_viewer_links table created or renamed from another table?
virtual-audience-app-v2  | ❯ + short_viewer_links           create table
virtual-audience-app-v2  |   ~ session › short_viewer_links rename tablenpm notice
virtual-audience-app-v2  | npm notice New major version of npm available! 10.8.2 -> 11.5.2
virtual-audience-app-v2  | npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
virtual-audience-app-v2  | npm notice To update run: npm install -g npm@11.5.2
virtual-audience-app-v2  | npm notice
virtual-audience-app-v2  | Starting Virtual Audience Platform...
virtual-audience-app-v2  | Using PostgreSQL driver for database connection
virtual-audience-app-v2  | Default admin user already exists
virtual-audience-app-v2  | 12:42:23 AM [express] serving on port 5000
virtual-audience-app-v2  | 12:42:33 AM [express] GET /api/user 304 in 13ms :: {"id":1,"username":"admin","email":"admin@stagelin…
virtual-audience-app-v2  | Creating link with data: {
virtual-audience-app-v2  |   id: '1755650558850',
virtual-audience-app-v2  |   streamName: 'testest',
virtual-audience-app-v2  |   returnFeed: 'livestream5',
virtual-audience-app-v2  |   chatEnabled: true,
virtual-audience-app-v2  |   url: 'https://dev.stagelinq.com/session?stream=testest&return=livestream5&chat=true',
virtual-audience-app-v2  |   expiresAt: null
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:42:40 AM [express] POST /api/short-links 200 in 20ms :: {"id":"KQhwgx","streamName":"testest","ret…
virtual-audience-app-v2  | Link created successfully with session token: {
virtual-audience-app-v2  |   id: '1755650558850',
virtual-audience-app-v2  |   streamName: 'testest',
virtual-audience-app-v2  |   returnFeed: 'livestream5',
virtual-audience-app-v2  |   chatEnabled: true,
virtual-audience-app-v2  |   url: 'https://dev.stagelinq.com/session?stream=testest&return=livestream5&chat=true&token=bd9f1131-0abe-4dd2-bd3f-1f61ae59abcc',
virtual-audience-app-v2  |   sessionToken: 'bd9f1131-0abe-4dd2-bd3f-1f61ae59abcc',
virtual-audience-app-v2  |   createdAt: 2025-08-20T00:42:40.563Z,
virtual-audience-app-v2  |   expiresAt: null,
virtual-audience-app-v2  |   createdBy: 1
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:42:40 AM [express] POST /api/links 200 in 31ms :: {"id":"1755650558850","streamName":"testest","re…
virtual-audience-app-v2  | Short link accessed: KQhwgx -> stream: testest, return: livestream5
virtual-audience-app-v2  | 12:42:48 AM [express] GET /api/user 304 in 8ms :: {"id":2,"username":"obed","email":"obedtest@tbn.tv"…
virtual-audience-app-v2  | 12:42:48 AM [express] POST /api/validate-token 200 in 16ms :: {"valid":true,"linkId":"1755650558850",…
virtual-audience-app-v2  | Fetching all links...
virtual-audience-app-v2  | Links fetched successfully: 1 links
virtual-audience-app-v2  | 12:42:57 AM [express] GET /api/links 200 in 20ms :: [{"id":"1755650558850","streamName":"testest","re…
virtual-audience-app-v2  | Fetching all viewer links...
virtual-audience-db-v2   | 2025-08-20 00:42:57.942 UTC [59] ERROR:  relation "viewer_links" does not exist at character 115
virtual-audience-db-v2   | 2025-08-20 00:42:57.942 UTC [59] STATEMENT:  select "id", "return_feed", "chat_enabled", "url", "session_token", "created_at", "expires_at", "created_by" from "viewer_links"
virtual-audience-app-v2  | Failed to fetch viewer links: error: relation "viewer_links" does not exist
virtual-audience-app-v2  |     at /app/node_modules/pg-pool/index.js:45:11
virtual-audience-app-v2  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
virtual-audience-app-v2  |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
virtual-audience-app-v2  |     at async DatabaseStorage.getAllViewerLinks (file:///app/dist/production.js:313:26)
virtual-audience-app-v2  |     at async file:///app/dist/production.js:843:21 {
virtual-audience-app-v2  |   length: 112,
virtual-audience-app-v2  |   severity: 'ERROR',
virtual-audience-app-v2  |   code: '42P01',
virtual-audience-app-v2  |   detail: undefined,
virtual-audience-app-v2  |   hint: undefined,
virtual-audience-app-v2  |   position: '115',
virtual-audience-app-v2  |   internalPosition: undefined,
virtual-audience-app-v2  |   internalQuery: undefined,
virtual-audience-app-v2  |   where: undefined,
virtual-audience-app-v2  |   schema: undefined,
virtual-audience-app-v2  |   table: undefined,
virtual-audience-app-v2  |   column: undefined,
virtual-audience-app-v2  |   dataType: undefined,
virtual-audience-app-v2  |   constraint: undefined,
virtual-audience-app-v2  |   file: 'parse_relation.c',
virtual-audience-app-v2  |   line: '1392',
virtual-audience-app-v2  |   routine: 'parserOpenTable'
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:42:57 AM [express] GET /api/viewer-links 500 in 14ms :: {"error":"Failed to fetch viewer links"}
virtual-audience-app-v2  | 12:43:03 AM [express] GET /api/user 304 in 11ms :: {"id":1,"username":"admin","email":"admin@stagelin…
virtual-audience-app-v2  | Fetching all links...
virtual-audience-app-v2  | Links fetched successfully: 1 links
virtual-audience-app-v2  | 12:43:03 AM [express] GET /api/links 304 in 17ms :: [{"id":"1755650558850","streamName":"testest","re…
virtual-audience-app-v2  | Fetching all viewer links...
virtual-audience-db-v2   | 2025-08-20 00:43:03.160 UTC [91] ERROR:  relation "viewer_links" does not exist at character 115
virtual-audience-db-v2   | 2025-08-20 00:43:03.160 UTC [91] STATEMENT:  select "id", "return_feed", "chat_enabled", "url", "session_token", "created_at", "expires_at", "created_by" from "viewer_links"
virtual-audience-app-v2  | Failed to fetch viewer links: error: relation "viewer_links" does not exist
virtual-audience-app-v2  |     at /app/node_modules/pg-pool/index.js:45:11
virtual-audience-app-v2  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
virtual-audience-app-v2  |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
virtual-audience-app-v2  |     at async DatabaseStorage.getAllViewerLinks (file:///app/dist/production.js:313:26)
virtual-audience-app-v2  |     at async file:///app/dist/production.js:843:21 {
virtual-audience-app-v2  |   length: 112,
virtual-audience-app-v2  |   severity: 'ERROR',
virtual-audience-app-v2  |   code: '42P01',
virtual-audience-app-v2  |   detail: undefined,
virtual-audience-app-v2  |   hint: undefined,
virtual-audience-app-v2  |   position: '115',
virtual-audience-app-v2  |   internalPosition: undefined,
virtual-audience-app-v2  |   internalQuery: undefined,
virtual-audience-app-v2  |   where: undefined,
virtual-audience-app-v2  |   schema: undefined,
virtual-audience-app-v2  |   table: undefined,
virtual-audience-app-v2  |   column: undefined,
virtual-audience-app-v2  |   dataType: undefined,
virtual-audience-app-v2  |   constraint: undefined,
virtual-audience-app-v2  |   file: 'parse_relation.c',
virtual-audience-app-v2  |   line: '1392',
virtual-audience-app-v2  |   routine: 'parserOpenTable'
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:43:03 AM [express] GET /api/viewer-links 500 in 11ms :: {"error":"Failed to fetch viewer links"}
virtual-audience-app-v2  | Fetching all links...
virtual-audience-app-v2  | Links fetched successfully: 1 links
virtual-audience-app-v2  | 12:43:08 AM [express] GET /api/links 304 in 14ms :: [{"id":"1755650558850","streamName":"testest","re…
virtual-audience-app-v2  | Fetching all viewer links...
virtual-audience-db-v2   | 2025-08-20 00:43:08.262 UTC [60] ERROR:  relation "viewer_links" does not exist at character 115
virtual-audience-db-v2   | 2025-08-20 00:43:08.262 UTC [60] STATEMENT:  select "id", "return_feed", "chat_enabled", "url", "session_token", "created_at", "expires_at", "created_by" from "viewer_links"
virtual-audience-app-v2  | Failed to fetch viewer links: error: relation "viewer_links" does not exist
virtual-audience-app-v2  |     at /app/node_modules/pg-pool/index.js:45:11
virtual-audience-app-v2  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
virtual-audience-app-v2  |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
virtual-audience-app-v2  |     at async DatabaseStorage.getAllViewerLinks (file:///app/dist/production.js:313:26)
virtual-audience-app-v2  |     at async file:///app/dist/production.js:843:21 {
virtual-audience-app-v2  |   length: 112,
virtual-audience-app-v2  |   severity: 'ERROR',
virtual-audience-app-v2  |   code: '42P01',
virtual-audience-app-v2  |   detail: undefined,
virtual-audience-app-v2  |   hint: undefined,
virtual-audience-app-v2  |   position: '115',
virtual-audience-app-v2  |   internalPosition: undefined,
virtual-audience-app-v2  |   internalQuery: undefined,
virtual-audience-app-v2  |   where: undefined,
virtual-audience-app-v2  |   schema: undefined,
virtual-audience-app-v2  |   table: undefined,
virtual-audience-app-v2  |   column: undefined,
virtual-audience-app-v2  |   dataType: undefined,
virtual-audience-app-v2  |   constraint: undefined,
virtual-audience-app-v2  |   file: 'parse_relation.c',
virtual-audience-app-v2  |   line: '1392',
virtual-audience-app-v2  |   routine: 'parserOpenTable'
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:43:08 AM [express] GET /api/viewer-links 500 in 39ms :: {"error":"Failed to fetch viewer links"}
virtual-audience-app-v2  | 12:43:11 AM [express] GET /api/user 304 in 10ms :: {"id":1,"username":"admin","email":"admin@stagelin…
virtual-audience-app-v2  | Fetching all links...
virtual-audience-app-v2  | Links fetched successfully: 1 links
virtual-audience-app-v2  | 12:43:11 AM [express] GET /api/links 304 in 19ms :: [{"id":"1755650558850","streamName":"testest","re…
virtual-audience-app-v2  | Fetching all viewer links...
virtual-audience-db-v2   | 2025-08-20 00:43:11.604 UTC [92] ERROR:  relation "viewer_links" does not exist at character 115
virtual-audience-db-v2   | 2025-08-20 00:43:11.604 UTC [92] STATEMENT:  select "id", "return_feed", "chat_enabled", "url", "session_token", "created_at", "expires_at", "created_by" from "viewer_links"
virtual-audience-app-v2  | Failed to fetch viewer links: error: relation "viewer_links" does not exist
virtual-audience-app-v2  |     at /app/node_modules/pg-pool/index.js:45:11
virtual-audience-app-v2  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
virtual-audience-app-v2  |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
virtual-audience-app-v2  |     at async DatabaseStorage.getAllViewerLinks (file:///app/dist/production.js:313:26)
virtual-audience-app-v2  |     at async file:///app/dist/production.js:843:21 {
virtual-audience-app-v2  |   length: 112,
virtual-audience-app-v2  |   severity: 'ERROR',
virtual-audience-app-v2  |   code: '42P01',
virtual-audience-app-v2  |   detail: undefined,
virtual-audience-app-v2  |   hint: undefined,
virtual-audience-app-v2  |   position: '115',
virtual-audience-app-v2  |   internalPosition: undefined,
virtual-audience-app-v2  |   internalQuery: undefined,
virtual-audience-app-v2  |   where: undefined,
virtual-audience-app-v2  |   schema: undefined,
virtual-audience-app-v2  |   table: undefined,
virtual-audience-app-v2  |   column: undefined,
virtual-audience-app-v2  |   dataType: undefined,
virtual-audience-app-v2  |   constraint: undefined,
virtual-audience-app-v2  |   file: 'parse_relation.c',
virtual-audience-app-v2  |   line: '1392',
virtual-audience-app-v2  |   routine: 'parserOpenTable'
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:43:11 AM [express] GET /api/viewer-links 500 in 41ms :: {"error":"Failed to fetch viewer links"}