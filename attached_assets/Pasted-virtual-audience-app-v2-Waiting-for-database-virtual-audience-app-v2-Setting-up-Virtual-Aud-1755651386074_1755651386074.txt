virtual-audience-app-v2  | Waiting for database...
virtual-audience-app-v2  | Setting up Virtual Audience Platform with authentication and URL shortening...
virtual-audience-app-v2  | Existing data detected (2 users) - preserving data and updating schema...
virtual-audience-app-v2  | Session tokens table exists - checking for any missing tables and columns...
virtual-audience-app-v2  | NOTICE:  relation "viewer_links" already exists, skipping
virtual-audience-app-v2  | CREATE TABLE
virtual-audience-app-v2  | CREATE TABLE
virtual-audience-app-v2  | NOTICE:  relation "generated_viewer_links" already exists, skipping
virtual-audience-app-v2  | CREATE TABLE
virtual-audience-app-v2  | DO
virtual-audience-app-v2  | DO
virtual-audience-app-v2  | DO
virtual-audience-app-v2  | Column checks completed
virtual-audience-app-v2  | No config path provided, using default 'drizzle.config.ts'
virtual-audience-app-v2  | Reading config file '/app/drizzle.config.ts'
virtual-audience-app-v2  | Using 'pg' driver for database querying
virtual-audience-app-v2  | [⣷] Pulling schema from database...
[⣯] Pulling schema from database...
[⣟] Pulling schema from database...
[✓] Pulling schema from database...
virtual-audience-app-v2  |
virtual-audience-app-v2  | Is return_feed column in short_viewer_links table created or renamed from another column?
virtual-audience-app-v2  | ❯ + return_feed                  create column
virtual-audience-app-v2  |   ~ viewer_link_id › return_feed rename columnnpm notice
virtual-audience-app-v2  | npm notice New major version of npm available! 10.8.2 -> 11.5.2
virtual-audience-app-v2  | npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.5.2
virtual-audience-app-v2  | npm notice To update run: npm install -g npm@11.5.2
virtual-audience-app-v2  | npm notice
virtual-audience-app-v2  | Starting Virtual Audience Platform...
virtual-audience-app-v2  | Using PostgreSQL driver for database connection
virtual-audience-app-v2  | Default admin user already exists
virtual-audience-app-v2  | 12:55:48 AM [express] serving on port 5000
virtual-audience-app-v2  | 12:56:04 AM [express] GET /api/user 304 in 15ms :: {"id":1,"username":"admin","email":"admin@stagelin…
virtual-audience-app-v2  | Viewer link created successfully with session token: {
virtual-audience-app-v2  |   id: '1755651367721',
virtual-audience-app-v2  |   returnFeed: 'livestream5',
virtual-audience-app-v2  |   chatEnabled: false,
virtual-audience-app-v2  |   url: 'https://dev.stagelinq.com/studio-viewer?return=livestream5&chat=false&token=f47f675f-a5db-477d-b5e3-0b029d9c3c38',
virtual-audience-app-v2  |   sessionToken: 'f47f675f-a5db-477d-b5e3-0b029d9c3c38',
virtual-audience-app-v2  |   createdAt: 2025-08-20T00:56:09.367Z,
virtual-audience-app-v2  |   expiresAt: null,
virtual-audience-app-v2  |   createdBy: 1
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:56:09 AM [express] POST /api/viewer-links 200 in 25ms :: {"id":"1755651367721","returnFeed":"lives…
virtual-audience-db-v2   | 2025-08-20 00:56:09.416 UTC [69] ERROR:  column "return_feed" does not exist at character 14
virtual-audience-db-v2   | 2025-08-20 00:56:09.416 UTC [69] STATEMENT:  select "id", "return_feed", "chat_enabled", "session_token", "created_at", "expires_at", "created_by" from "short_viewer_links" where "short_viewer_links"."id" = $1
virtual-audience-app-v2  | Failed to create short viewer link: error: column "return_feed" does not exist
virtual-audience-app-v2  |     at /app/node_modules/pg-pool/index.js:45:11
virtual-audience-app-v2  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
virtual-audience-app-v2  |     at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22
virtual-audience-app-v2  |     at async DatabaseStorage.getShortViewerLink (file:///app/dist/production.js:351:24)
virtual-audience-app-v2  |     at async file:///app/dist/production.js:914:26
virtual-audience-app-v2  |     at async generateUniqueShortCode (file:///app/dist/production.js:667:10)
virtual-audience-app-v2  |     at async file:///app/dist/production.js:913:25 {
virtual-audience-app-v2  |   length: 111,
virtual-audience-app-v2  |   severity: 'ERROR',
virtual-audience-app-v2  |   code: '42703',
virtual-audience-app-v2  |   detail: undefined,
virtual-audience-app-v2  |   hint: undefined,
virtual-audience-app-v2  |   position: '14',
virtual-audience-app-v2  |   internalPosition: undefined,
virtual-audience-app-v2  |   internalQuery: undefined,
virtual-audience-app-v2  |   where: undefined,
virtual-audience-app-v2  |   schema: undefined,
virtual-audience-app-v2  |   table: undefined,
virtual-audience-app-v2  |   column: undefined,
virtual-audience-app-v2  |   dataType: undefined,
virtual-audience-app-v2  |   constraint: undefined,
virtual-audience-app-v2  |   file: 'parse_relation.c',
virtual-audience-app-v2  |   line: '3665',
virtual-audience-app-v2  |   routine: 'errorMissingColumn'
virtual-audience-app-v2  | }
virtual-audience-app-v2  | 12:56:09 AM [express] POST /api/short-viewer-links 500 in 35ms :: {"error":"Failed to create short vi…